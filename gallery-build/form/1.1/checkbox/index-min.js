KISSY.add("gallery/form/1.1/checkbox/base",function(k,m,n){function j(a,b){j.superclass.constructor.call(this,b);this.set("target",a)}var e=n.all;k.extend(j,m,{render:function(){this._replaceCheckbox();this._bindEvent()},recoverCheckbox:function(){var a=this.get("target"),b=this.get("checkboxs");e(b).each(function(d,c){d.hide();e(a[c]).show()});return this},_replaceCheckbox:function(){var a=this,b=a.get("target"),d=a._getHtml(0),c=a._getHtml(2),h=a._getHtml(1),f,l=[];if(b.length===0)return false;
b.each(function(g){g.hide();f=a._isDisabled(g)?e(c).insertBefore(g).attr("ks-checkbox-disabled","disabled"):a._isChecked(g)?e(h).insertBefore(g):e(d).insertBefore(g);l.push(f)});a.set("checkboxs",l)},_getHtml:function(a){var b=this.get("cls"),d=b.checked,c=b.disabled;b={defalutName:b.init};switch(a){case 0:b.secondName="";break;case 1:b.secondName=d;break;case 2:b.secondName=c}return k.substitute('<span class="{defalutName} {secondName}"></span>',b)},_bindEvent:function(){var a=this,b=e(a.get("checkboxs")),
d=this.get("cls").hover;b.each(function(c,h){c.on("mouseenter mouseleave",function(f){if(!(a._isChecked(c)||a._isDisabled(c)))switch(f.type){case "mouseenter":c.addClass(d);break;case "mouseleave":c.removeClass(d)}}).on("click",function(){a._isDisabled(c)||a._clickHandler.call(a,h)})})},_clickHandler:function(a){var b=this.get("target"),d=e(this.get("checkboxs")[a]),c=this.get("cls").checked;e(b[a]).fire("click");d.toggleClass(c)},_isDisabled:function(a){var b=e(a).attr("disabled");a=e(a).attr("ks-checkbox-disabled");
return b==="disabled"||a==="disabled"},_isChecked:function(a){var b=e(a).prop("checked");a=e(a).hasClass(this.get("cls").checked);return b||a},setDisabled:function(a){var b=this.get("checkboxs"),d=this.get("target"),c=this.get("cls"),h=c.checked,f=c.disabled;c=c.hover;if(typeof a==="number"){b=e(b[a]);a=e(d[a]);b.attr("ks-checkbox-disabled","disabled").removeClass(h+" "+c).addClass(f);a.attr("disabled","disabled")}return this},selectAll:function(){var a=this,b=a.get("checkboxs");e(b).each(function(d){a._isChecked(d)||
d.fire("click")});return a},resetAll:function(){var a=this,b=a.get("checkboxs"),d=a.get("cls").hover;e(b).each(function(c){a._isChecked(c)&&c.fire("click").removeClass(d)});return a},getAllChecked:function(){var a=this.get("target"),b=[],d;i=0;for(len=a.length;i<len;i++){d=e(a[i]);this._isDisabled(d)||this._isChecked(d)&&b.push(i)}return b}},{ATTRS:{target:{value:"",setter:function(a){return e(a)},getter:function(a){return e(a)}},checkboxs:{value:[]},cls:{value:{init:"ks-checkbox",checked:"ks-checkbox-checked",
disabled:"ks-checkbox-disabled",hover:"ks-checkbox-hover"}}}});return j},{requires:["base","node"]});
