<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<title>KISSY gallery - countdown</title>
<link rel="shortcut icon" href="../../../../kissy-dpl/base/assets/favicon.ico"/>
<link rel="stylesheet" href="../../../../kissy-dpl/base/assets/reset.css"/>
<link rel="stylesheet" href="../../../../kissy-dpl/base/assets/kissy-docs.css"/>
<!--
<script src="http://docs.kissyui.com/kissy/build/kissy.js"></script>
-->
<script src="http://a.tbcdn.cn/??s/kissy/1.2.0/kissy.js"></script>
<script src="../../../../kissy-dpl/base/assets/kissy-docs.js"></script>
<script>
    KISSY.config({
        packages:[
            {
                name:"gallery",
                tag:"20111220",
                path:"../../../",  // cdn上适当修改对应路径
                charset:"utf-8"
            }
        ]
    });
</script>
<style>
/* main-content.less */
.ks-timeline .main-content {
  position: relative;
  width: 90%;
  min-width: 1000px;
  margin: 0 auto;
  overflow: auto;
  max-height: 250px;
  overflow: auto;
  border: 1px solid pink;
}
.ks-timeline .main-content img{
    
}

.ks-timeline .kt-navigation{
    width: 1050px !important;
    left: -50px;
}
</style>
</head>
<body>
<div id="header">
    <h1 class="logo"><a href="http://kissyui.com/"><img src="../../../../kissy-dpl/base/assets/logo.png" alt="KISSY"/></a></h1>
    <div class="sub-title">Gallery</div>
    <ul class="navigation">
        <li><a href="http://blog.kissyui.com/">博客</a></li>
        <li><a href="http://github.com/kissyteam">源码</a></li>
    </ul>
</div>
<div id="content">
    <div class="s-crumbs">
        <span>当前位置：</span>
        <a href="http://kissyui.com/">KISSY</a>
        <a href="../../../index.html">Gallery</a>
        <strong>timeline</strong>
    </div>
    <pre class="s-section" style="color: #aaa">             
作者：g.gaokai@gmail.com(yumen.gk) 
    </pre>
    <h3 class="s-title">Demo</h3>
    <br/>
    <strong>KS-Timeline:</strong>
    <br/><br/>
    <div id="K_Track2" class="ks-timeline">
        <div id="KT_Navigation2" class="kt-navigation" style="height: 150px;"></div>
        <span>Controler: </span>
        <button href="#" onclick="window.track2.prev();" style="padding: 3px 5px;">prev</button>
        <button href="#" onclick="window.track2.next();" style="padding: 3px 5px;">next</button>
        <button href="#" onclick="window.track2.switchTo(document.getElementById('J_Track2SwitchTo').value);" style="margin-left: 10px;padding: 3px 5px;">switchTo</button>
        <input type="text" id="J_Track2SwitchTo" value="0" style="width: 30px;" />
        <textarea id="J_Track2ChangeCallback" style="width: 293px;height: 85px;">
console.log(e.type);
console.log(e.target);
console.log(e.data);
        </textarea>
        <br/>
        <br/>
    </div>
    <strong>HTML + JS :</strong> <a href="javascript:;" onclick="KISSY.all('#J_ToggleTrackCode').slideToggle();">显示源码</a>
    <div id="J_ToggleTrackCode" style="display: none;">
    <pre style="color: green;">
    &lt;div class="ks-timeline"&gt;
        &lt;div id="KT_Navigation2" class="kt-navigation"&gt;&lt;/div&gt;
    &lt;/div&gt;

    KISSY.use('gallery/timeline/1.0/index, gallery/timeline/1.0/assets/default.css', function(S, KSTrack){
        var $ = S.all;
        <strong>//初始化 数据</strong>
        window.myData2 = [
        {'time': '20120301','title': '2012.03.01'},{'time': '20120806','title': '2012.08.06'}
        ,{'time': '20120402','title': '2012.04.02'},{'time': '20120503','title': '2012.05.03'}
        ,{'time': '20120604','title': '2012.06.04'},{'time': '20120705','title': '2012.07.05'}
        ,{'time': '20120907','title': '2012.09.07'},{'time': '2013','title': 'Taobao UED'}];

        var config2 = {
            panel: $('#KT_Navigation2')
            ,data: myData2
        };

        var track2 = new KSTrack(config2);
        <strong>//change自定义事件</strong>
        track2.on('change', function(e){
            /**
              * e:  e.data(初始化数据对象)
              */
            S.log('[timeline]:',e)
            S.io({
                type: 'post'
                ,url: 'demoajax/' + e.data.time + '.php'
                ,success: function(data){
                $('#KT_MainContent').html(data);
                }
            });
        });
        <strong>//滚到 索引为1的那个时间结点</strong>
        track2.switchTo(1);
        // track2.prev();
        // track2.next();
    });
    </pre>
    </div>
    <div style="color: #5A3A5A; font-weight: bolder;">
        <h3 class="s-title">参数配置(Config)</h3>
        <br/>
        <p class="s-api-params">panel <em></em></p>
        <p class="s-api-params">data</p>
    </div>
    <div style="color: #E68C3A;">
        <h3 class="s-title">对象属性(Attributes)</h3>
    </div>
    <div style="color: #312184; font-weight: bolder;">
        <h3 class="s-title">方法(Methods)</h3>
        <br/>
        <p class="s-api-params">switchTo</p>
        <p class="s-api-params">prev</p>
        <p class="s-api-params">next</p>
    </div>

    <div style="color: #298473;font-weight: bolder;">
        <h3 class="s-title">事件(Events)</h3>
        <p class="s-api-params">change</p>
    </div>
    <br>
    <br>
    <br>
    <br>
    <br>
    <h3 class="s-title" style="margin: 0 0 20px 0;">其他demo</h3>
    <!-- BEGIN Timeline Embed -->
    <div id="K_Track" class="ks-timeline">
        <div id="KT_MainContent" class="main-content"></div>
        <div id="KT_Navigation" class="kt-navigation"></div>
        <span>Controler: </span>
        <button href="#" onclick="window.track.prev();" style="padding: 3px 5px;">prev</button>
        <button href="#" onclick="window.track.next();" style="padding: 3px 5px;">next</button>
        <button href="#" onclick="window.track.switchTo(document.getElementById('J_Track2SwitchTo2').value);" style="margin-left: 10px;padding: 3px 5px;">switchTo</button>
        <input type="text" id="J_Track2SwitchTo2" value="0" style="width: 30px;" />
    </div>
    <a href="javascript:;" onclick="KISSY.all('#J_ToggleTrackCode').slideToggle();">查看源码</a>
    <div id="J_ToggleTrackCode" style="display: none;">
    <pre style="color: green;">
    &lt;div id="K_Track2" class="ks-timeline"&gt;
        &lt;div id="KT_MainContent" class="main-content"&gt;&lt;/div&gt;
        &lt;div id="KT_Navigation" class="kt-navigation"&gt;&lt;/div&gt;
    &lt;/div&gt;

    KISSY.use('gallery/timeline/1.0/index, gallery/timeline/1.0/assets/default.css', function(S, KSTrack){
        var $ = S.all;

        var config = {
            panel: $('#KT_Navigation')
            ,data: myData
        };
        var track = new KSTrack(config);
        <strong>//change自定义事件</strong>
        track.on('change', function(e){
            
            S.io({
                type: 'post'
                ,url: 'demoajax/' + e.data.time + '.php'
                ,success: function(data){
                $('#KT_MainContent').html(data);
                }
            });
        });
        <strong>//滚到 索引为1的那个时间结点</strong>
        track.switchTo(1);
        // track.prev();
        // track.next();
    });
    </pre>
    </div>

</div>
<script>
KISSY.use('gallery/timeline/1.0/index, gallery/timeline/1.0/assets/default.css', function(S, KSTrack){
  var $ = S.all;

  var config = {
    panel: $('#KT_Navigation')
    ,data: myData
  };

  var track = new KSTrack(config);

  track.on('change', function(e){
    S.log('[timeline]:',e);
    S.io({
      type: 'get'
      ,dataType: 'jsonp'
      ,url: 'demoajax/' + e.data.time + '.js'
      ,success: 'jsonp_timeline'
    });
  });

  window.jsonp_timeline = function(data){
    $('#KT_MainContent').html(data.html);    
  }

  window.track = track;
  track.switchTo(1);
  // track.prev();
  // track.next();

  var config2 = {
    panel: $('#KT_Navigation2')
    ,data: myData2
  };

  var track2 = new KSTrack(config2);

  track2.on('change', function(e){
    S.log('[-----------change----------]');
    var cb = new Function($('#J_Track2ChangeCallback').val());
    var w_e = window.e;
    window.e = e;
    cb();
    window.e = w_e;
    
    // (function(e){
    //     cb();
    // })(e);
    // new Function($('#J_Track2ChangeCallback').val())();
    S.log('[-----------change----------]');
  });

  track2.switchTo(0);
  // console.log(track);
  window.track2 = track2;
});

//demo data
window.myData = [
    {
        'time': '19880308'
        ,'title': '0'
    }
    ,{
        'time': '19900308'
        ,'title': '2'
    }
    ,{
        'time': '19880408'
        ,'title': '1'
    }
    ,{
        'time': '199409'
        ,'title': '3'
    }
    ,{
        'time': '1997'
        ,'title': '4'
    }
    ,{
        'time': '2000'
        ,'title': '5'
    }
    ,{
        'time': '2001'
    ,'title': '6'
    }
    // ,{
    //     'time': '2003'
    // ,'hidden': true
    // }
    ,{
    'time': '2012'
    ,'title': 'Taobao UED'
    }
    // ,{
    //   'time': '3000'
    //   ,'title': 'forever'
    // }
];
window.myData2 = [
    {
        'time': '20120301'
        ,'title': '2012.03.01'
    }
    ,{
        'time': '20120806'
        ,'title': '2012.08.06'
    }
    ,{
        'time': '20120402'
        ,'title': '2012.04.02'
    }
    ,{
        'time': '20120503'
        ,'title': '2012.05.03'
    }
    ,{
        'time': '20120604'
        ,'title': '2012.06.04'
    }
    ,{
        'time': '20120705'
        ,'title': '2012.07.05'
    }
    ,{
        'time': '20120907'
    ,'title': '2012.09.07'
    }
    // ,{
    //     'time': '2003'
    // ,'hidden': true
    // }
    ,{
    'time': '2013'
    ,'title': 'Taobao UED'
    }
    // ,{
    //   'time': '3000'
    //   ,'title': 'forever'
    // }
];
</script>
<div id="footer">
    © Copyright 2010~2012, KISSY Team.
</div>
</body>
</html>
