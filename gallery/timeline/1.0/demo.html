<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<title>KISSY gallery - countdown</title>

<link rel="stylesheet" href="http://a.tbcdn.cn/s/kissy/1.3.0/css/dpl/base-min.css"/>
<link rel="stylesheet" href="../../../tools/skin/default.css"/>
<!--
<script src="http://a.tbcdn.cn/s/kissy/1.3.0/kissy.js" charset="utf-8"></script>
-->
<script src="http://a.tbcdn.cn/??s/kissy/1.2.0/kissy.js"></script>
    <link rel="stylesheet" href="../../../tools/skin/show-code.js"/>
<script>
    KISSY.config({
        packages:[
            {
                name:"gallery",
                tag:"20111220",
                path:"../../../",  // cdn上适当修改对应路径
                charset:"utf-8"
            }
        ]
    });
</script>
<style>
/* main-content.less */
.ks-timeline .main-content {
  position: relative;
  width: 90%;
  min-width: 1000px;
  margin: 0 auto;
  overflow: auto;
  max-height: 250px;
  overflow: auto;
  border: 1px solid pink;
}
.ks-timeline .main-content img{
    
}

.ks-timeline .kt-navigation{
    width: 1050px !important;
    left: -50px;
}
</style>
</head>
<body>
<div id="header">
    <h1 class="logo"><a href="http://kissyui.com/"><img src="http://a.tbcdn.cn/s/kissy/logo.png" alt="KISSY"/></a></h1>
    <div class="sub-title">Gallery</div>
    <ul class="navigation">
        <li><a href="http://docs.kissyui.com/">首页</a></li>
        <li><a href="http://github.com/kissyteam">源码</a></li>
    </ul>
</div>
<div id="content">
    <div class="s-crumbs">
        <span>当前位置：</span>
        <a href="http://kissyui.com/">KISSY</a>
        <a href="../../../index.html">Gallery</a>
        <strong>timeline</strong>
    </div>
    <pre class="s-section" style="color: #aaa">             
作者：g.gaokai@gmail.com(yumen.gk) 
    </pre>
    <h3 class="s-title">update log</h3>
    <pre>
[20121010] add: window.location.hash tag, add prev,next,switchTo, add dd mask on mousemove
[20121011] add: 时间刻度的月份的支持
[20121019] bugfix: 快速点击放大|缩小，markers偏移出错、被hover的marker，z-index为最高层； 
           add: 提供resizeWidth功能
[20121021] add: scale,minRate,maxRate可配置
    </pre>
    <h3 class="s-title">Demo</h3>
    <br/>
    <strong>KS-Timeline:</strong>
    <br/><br/>
    <div id="K_Track" class="ks-timeline">
        <div id="KT_Navigation" class="kt-navigation" style="height: 150px;"></div>
        <span>Controler: </span>
        <button href="#" onclick="window.track.prev();" style="padding: 3px 5px;">prev</button>
        <button href="#" onclick="window.track.next();" style="padding: 3px 5px;">next</button>
        <button href="#" onclick="window.track.switchTo(document.getElementById('J_TrackSwitchTo').value);" style="margin-left: 10px;padding: 3px 5px;">switchTo</button>
        <input type="text" id="J_TrackSwitchTo" value="0" style="width: 30px;" />
        
        <br/>
        <br/>
    </div>
    <strong>HTML + JS :</strong> <a href="javascript:;" onclick="KISSY.all('#J_ToggleTrackCode').slideToggle();">显示源码</a>
    <div id="J_ToggleTrackCode" style="display: none;">
    <pre style="color: green;">
    &lt;div class="ks-timeline"&gt;
        &lt;div id="KT_Navigation" class="kt-navigation"&gt;&lt;/div&gt;
    &lt;/div&gt;

    KISSY.use('gallery/timeline/1.0/index, gallery/timeline/1.0/assets/default.css', function(S, KSTrack){
      var $ = S.all;

      var myData = [
        {'time': '20120101','title': '20110101'},{'time': '2012-3-01','title': '2012.03.01'}
        ,{'time': '2012.8.6','title': '2012.08.06'},{'time': '20120402','title': '2012.04.02'}
        ,{'time': '20120503','title': '2012.05.03'},{'time': '20120604','title': '2012.06.04'}
        ,{'time': '20120705','title': '2012.07.05'},{'time': '20120907','title': '2012.09.07'}
        ,{'time': '20130121','title': '20130121'},{'time': '2013.11.12','title': '2013.11.12'}
      ];//系统会对根据time 自动进行排序

      var config = {
        panel: $('#KT_Navigation')
        ,data: myData
        ,scale: 50 //初始化时，一月的在标尺上的宽度 默认100px
        ,minRate: 2 //最大放大倍数(即放大可点击三次)
        ,maxRate: 2 //最小缩小倍数
      };

      var track = new KSTrack(config);

      track.on('change', function(e){
        
      });

      track.switchTo(0);
      window.track = track;
    });
    </pre>
    </div>
    <div style="color: #5A3A5A; font-weight: bolder;">
        <h3 class="s-title">参数配置(Config)</h3>
        <br/>
        <p class="s-api-params">panel: <em>时间轴容器DOM对象</em></p>
        <p class="s-api-params">data: <em>节点数组</em></p>
        <p class="s-api-params">scale: <em>初始化时间轴时，一个月的在标尺上的宽度 (默认100px)</em></p>
        <p class="s-api-params">minRate: <em>时间轴，最大缩小倍数(默认为3)</em></p>
        <p class="s-api-params">maxRate: <em>时间轴，最大放大倍数(默认为3)</em></p>
    </div>
    <div style="color: #E68C3A;">
        <h3 class="s-title">对象属性(Attributes)</h3>
    </div>
    <div style="color: #312184; font-weight: bolder;">
        <h3 class="s-title">方法(Methods)</h3>
        <br/>
        <p class="s-api-params">switchTo(idx): <em>idx: {Number}; 滚动到索引处</em></p>
        <p class="s-api-params">prev(): <em>滚动到下一个时间节点</em></p>
        <p class="s-api-params">next(): <em>滚动到上一个时间节点</em></p>
    </div>

    <div style="color: #298473;font-weight: bolder;">
        <h3 class="s-title">事件(Events)</h3>
        <p class="s-api-params">change: <em>e: {<br>target,//时间节点dom的引用;<br>data//初始化数组中对应于该节点的数据，传递到这个data中;<br>}</em></p>
    </div>
    <br>
    <br>
    <br>
    <br>
    <br>
</div>
<script>
KISSY.use('gallery/timeline/1.0/index, gallery/timeline/1.0/assets/default.css', function(S, KSTrack){
  var $ = S.all;

  // var config = {
  //   panel: $('#KT_Navigation')
  //   ,data: myData
  // };

  // var track = new KSTrack(config);

  // track.on('change', function(e){
  //   // S.log('[timeline]:',e);
  //   S.io({
  //     type: 'get'
  //     ,dataType: 'jsonp'
  //     ,url: 'demoajax/' + e.data.time + '.js'
  //     ,success: 'jsonp_timeline'
  //   });
  // });

  window.jsonp_timeline = function(data){
    $('#KT_MainContent').html(data.html);    
  }

  var config = {
    panel: $('#KT_Navigation')
    ,data: myData
    ,scale: 50 //初始化时，一月的在标尺上的宽度 默认100px
    ,minRate: 2 //最大放大倍数(即放大可点击三次)
    ,maxRate: 2 //最小缩小倍数
  };

  var track = new KSTrack(config);

  track.on('change', function(e){
    
  });

  track.switchTo(0);
  // console.log(track);
  window.track = track;
});

//demo data

window.myData = [
    {
        'time': '20120101'
        ,'title': '20110101'
    }
    ,{
        'time': '2012-3-01'
        ,'title': '2012.03.01'
    }
    ,{
        'time': '2012.8.6'
        ,'title': '2012.08.06'
    }
    ,{
        'time': '20120402'
        ,'title': '2012.04.02'
    }
    ,{
        'time': '20120503'
        ,'title': '2012.05.03'
    }
    ,{
        'time': '20120604'
        ,'title': '2012.06.04'
    }
    ,{
        'time': '20120705'
        ,'title': '2012.07.05'
    }
    ,{
        'time': '20120907'
    ,'title': '2012.09.07'
    }
    ,{
        'time': '20130121'
        ,'title': '20130121'
    }
    ,{
        'time': '2013.11.12'
        ,'title': '2013.11.12'
    }
    // ,{
    //   'time': '3000'
    //   ,'title': 'forever'
    // }
];
</script>
<div id="footer">
    © Copyright 2010~2012, KISSY Team.
</div>
</body>
</html>
